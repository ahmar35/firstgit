<html>

<head>

<style>

    .block{display: block;width:25%;height: 30px; background-color: tomato;font-size:16px;cursor:pointer ;}

body {background-image: url(https://freepngimg.com/thumb/machine/40018-1-call-centre-images-free-download-png-hd.png);}

</style>

</head>

<body>

<center>



<h1 style=center;color: tomato;">Book a call</h1>

<h3>Book a call slot and our representative will call you within 1 hour of selected time</h3>

<hr width="100%" size="4px">

    <form  onsubmit="registerUser(event)">

        Name:

        <input type="text" id="name" Name="Name" required>

        <br>

        <br>



        Email:<input type="email" id="mail" required>

        <br>

        <br>



        Phone:<input type="text" id="phone" >

        <br>

        <br>



        Time for call:<input type="date" id="date" ><input type="time" id="time">

        <br>

        <br>

        <button class="block";type="button">GET A CALL</button> 

</center>

    </form>
    <ul id="listuser" ></ul>

    <script>

        function registerUser(event) {
            const name=document.getElementById("name").value;
            const mail=document.getElementById('mail').value;
            const contact=document.getElementById("phone").value;
            const time=document.getElementById("time").value;
            const date=document.getElementById("date").value;
            obj={
                name,
                mail,
                contact,
                time,
                date
            }
            localStorage.setItem(obj.mail,JSON.stringify(obj))

            event.preventDefault()
            var newuser=(JSON.parse(localStorage.getItem(obj.mail)))  
            console.log(newuser)
            shownewuseronscreen(obj)
        }
        
        window.addEventListener("DOMContentLoaded", () => {
                const localStorageObj = localStorage;
                const localstoragekeys  = Object.keys(localStorageObj)

                for(var i =0; i< localstoragekeys.length; i++){
                    const key = localstoragekeys[i]
                    const userDetailsString = localStorageObj[key];
                    const userDetailsObj = JSON.parse(userDetailsString);
                    shownewuseronscreen(userDetailsObj)
                }
            })
        function shownewuseronscreen(user){
            if (localStorage.getItem(user.mail)!=null){
                removeUserFromScreen(user.mail)
            }
            const parentNode=document.getElementById("listuser")
            var childHTML=`<li id=${user.mail}> ${user.name} - ${user.mail}
                <button onclick =deleteuser("${user.mail}")>deleteuser</button>
                <button onclick=edituser("${user.mail}","${user.name}")>edit</button>
                </li>`
            parentNode.innerHTML=parentNode.innerHTML+childHTML
        }
        
            //Edit User

        function edituser(mail, name){

            document.getElementById('mail').value = mail;
            document.getElementById('name').value = name;
            deleteuser(mail)


        }
        function deleteuser(mail){
            localStorage.removeItem(mail)
            console.log(mail)
            removeUserFromScreen(mail)
        }
        function removeUserFromScreen(mail){
            const parentNode=document.getElementById("listuser")

            const childNodetobeDeleted=document.getElementById(mail)
            if (childNodetobeDeleted){

            
                parentNode.removeChild(childNodetobeDeleted)
            }
        }  

        
    </script>

</body>


</html>